import"./lodash-DN9DU0YO.js";import{_ as k,d as B,r as u,C as p,w as F,e as f,j as S,o as D,h as r,i as g,f as _,n as v,v as N,x as j,Z as l}from"./index-ChCbqBtc.js";import{i as q}from"./index-BD3tVcmV.js";const R=a=>(N("data-v-aaf949e7"),a=a(),j(),a),T=R(()=>g("div",{class:"bg-red-200 view-detail"},"图谱内容",-1)),E={class:"dialog-footer"},L={__name:"View",props:{visible:{type:Boolean,default:!1},dataItem:{type:Object,default:()=>({})}},emits:["update:visible","refresh-list"],setup(a,{emit:b}){const{proxy:M}=B(),t=a,m=b,n=u(!1),c=u(null),o=p({name:"",description:""});p({name:[{required:!0,message:"请输入专题名称",trigger:"blur"},{min:2,message:"请输入2~10个字符",trigger:"blur"}]});const h=()=>{var e;(e=c.value)==null||e.resetFields(),o.name=""},d=()=>{m("update:visible",!1),h()},y=()=>{d()},I=()=>{o.name=t.dataItem.name,o.description=t.dataItem.description},V=async()=>{try{n.value=!0,q({id:t.dataItem.id,name:`${o.name}`,description:o.description}).then(e=>{const{code:s,msg:i}=e;s===200?(l.success("操作成功！"),d(),m("refresh-list")):l.error(""+i)})}catch{l.error("操作失败，请重试")}finally{setTimeout(()=>{n.value=!1},500)}},w=()=>{c.value&&c.value.validate(e=>{e?V():l.error("请检查表单输入")})};return F(()=>t.visible,e=>{e&&I()},{immediate:!0}),(e,s)=>{const i=f("el-button"),x=f("el-dialog");return D(),S(x,{title:"查看图谱",modelValue:t.visible,"onUpdate:modelValue":s[0]||(s[0]=C=>t.visible=C),width:"80%","append-to-body":"","before-close":d},{footer:r(()=>[g("div",E,[_(i,{onClick:y},{default:r(()=>[v("取消")]),_:1}),_(i,{type:"primary",onClick:w,loading:n.value},{default:r(()=>[v(" 确定 ")]),_:1},8,["loading"])])]),default:r(()=>[T]),_:1},8,["modelValue"])}}},$=k(L,[["__scopeId","data-v-aaf949e7"]]);export{$ as default};
