import{B as Q,a as j,d as G,r as e,C as A,J as H,e as s,G as J,c as N,o as r,H as c,f as o,I as O,l as n,h as l,m as M,K as W,L as X,j as f,n as u,D,t as Y}from"./index-ChCbqBtc.js";import{R as Z,d as ee}from"./template-D_2TWKT_.js";import te from"./Upload-EzxeIJlL.js";import{c as le}from"./tool-CCETPaDm.js";const ae={class:"app-container"},oe=Q({name:"Template"}),ce=Object.assign(oe,{setup(ne){j();const{proxy:_}=G(),{sys_normal_disable:se}=_.useDict("sys_normal_disable"),{template_type:R}=_.useDict("template_type");e([]),e(!1);const S=e(!0),h=e(!0);e([]),e(!0),e(!0),e(0),e("");const V=e([]);e([]),e(!1),e(!1),e(!0),e(!1),e([]),e(!1),e(null),e(null);const z=A({form:{},queryParams:{pageNum:1,pageSize:10,roleName:void 0,roleKey:void 0,status:void 0}}),{form:ie,rules:re}=H(z),T=e([{prop:"templateName",label:"模板名称",align:"left"},{prop:"templateType",label:"模板类型",type:"filter",dictionary:"template_type"},{prop:"fileSize",label:"文件大小",type:"custom"},{prop:"uploadUser",label:"上传人"},{prop:"createTime",label:"上传时间"},{prop:"",label:"操作",type:"operation",width:300}]),w=e([]),m=e({total:0,pageNum:1,pageSize:10}),d=e({word:void 0});function y(){S.value=!0;let i={current:m.value.pageNum,pageSize:m.value.pageSize};Z(i).then(a=>{w.value=a.rows,m.value.total=a.total,S.value=!1})}function g(){d.value.pageNum=1,y()}function U(){V.value=[],_.resetForm("queryRef"),g()}function $(){b.value=!0}y();let b=e(!1);const q=i=>{_.$modal.confirm(`是否确认删除角色编号为${i.templateName}的数据项?`).then(function(){return ee(i.id)}).then(()=>{y(),_.$modal.msgSuccess("删除成功")}).catch(()=>{})};return(i,a)=>{const x=s("el-input"),k=s("el-form-item"),E=s("el-option"),P=s("el-select"),p=s("el-button"),B=s("el-form"),K=s("el-col"),L=s("right-toolbar"),F=s("el-row"),I=s("Table"),v=J("hasPermi");return r(),N("div",ae,[c(o(B,{model:n(d),ref:"queryRef",inline:!0,"label-width":"68px"},{default:l(()=>[o(k,{label:"模板名称",prop:"roleName"},{default:l(()=>[o(x,{modelValue:n(d).roleName,"onUpdate:modelValue":a[0]||(a[0]=t=>n(d).roleName=t),placeholder:"请输入模板名称",clearable:"",style:{width:"240px"},onKeyup:M(g,["enter"])},null,8,["modelValue"])]),_:1}),o(k,{label:"模板类型",prop:"status"},{default:l(()=>[o(P,{modelValue:n(d).status,"onUpdate:modelValue":a[1]||(a[1]=t=>n(d).status=t),placeholder:"模板类型",clearable:"",style:{width:"240px"}},{default:l(()=>[(r(!0),N(W,null,X(n(R),t=>(r(),f(E,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(k,null,{default:l(()=>[o(p,{type:"primary",icon:"Search",onClick:g},{default:l(()=>[u("搜索")]),_:1}),o(p,{icon:"Refresh",onClick:U},{default:l(()=>[u("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[O,n(h)]]),o(F,{gutter:10,class:"mb8"},{default:l(()=>[o(K,{span:1.5},{default:l(()=>[c((r(),f(p,{type:"primary",plain:"",icon:"Plus",onClick:$},{default:l(()=>[u("新增")]),_:1})),[[v,["system:role:add"]]])]),_:1}),o(L,{showSearch:n(h),"onUpdate:showSearch":a[2]||(a[2]=t=>D(h)?h.value=t:null),onQueryTable:y},null,8,["showSearch"])]),_:1}),o(I,{paginationData:n(m),"onUpdate:paginationData":a[3]||(a[3]=t=>D(m)?m.value=t:null),tableColumn:n(T),tableData:n(w),showIndex:!0,onGetTableData:y},{fileSize:l(({row:t})=>[u(Y(n(le)(t.fileSize).formatted),1)]),operation:l(({row:t})=>[c((r(),f(p,{link:"",type:"primary",icon:"Download",onClick:C=>i.handleEdit(t)},{default:l(()=>[u("下载 ")]),_:2},1032,["onClick"])),[[v,["system:sensitive:update"]]]),c((r(),f(p,{link:"",type:"primary",icon:"View",onClick:C=>i.handleEdit(t)},{default:l(()=>[u("预览 ")]),_:2},1032,["onClick"])),[[v,["system:sensitive:update"]]]),c((r(),f(p,{link:"",type:"primary",icon:"Edit",onClick:C=>i.handleEdit(t)},{default:l(()=>[u("修改 ")]),_:2},1032,["onClick"])),[[v,["system:sensitive:update"]]]),c((r(),f(p,{link:"",type:"danger",icon:"Delete",onClick:C=>q(t)},{default:l(()=>[u(" 删除 ")]),_:2},1032,["onClick"])),[[v,["system:sensitive:delete"]]])]),_:1},8,["paginationData","tableColumn","tableData"]),o(te,{visible:n(b),"onUpdate:visible":a[4]||(a[4]=t=>D(b)?b.value=t:b=t),onRefreshList:g},null,8,["visible"])])}}});export{ce as default};
