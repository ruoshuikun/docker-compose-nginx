import{_ as I,d as N,r as b,C as v,w as R,e as l,j,o as q,h as a,f as s,p as K,i as M,n as h,Z as r,am as T}from"./index-ChCbqBtc.js";import"./lodash-DN9DU0YO.js";const U={class:"dialog-footer"},A={__name:"CreateKnowledgeBase",props:{visible:{type:Boolean,default:!1},title:{type:String,default:"新增知识库",validator:i=>["新增","修改"].includes(i)},treeSelectedItem:{type:Object,default:()=>({})}},emits:["update:visible","refresh-list"],setup(i,{emit:y}){const{proxy:E}=N(),m=i,p=y,d=b(!1),n=b(null),t=v({name:""}),w=v({name:[{required:!0,message:"请输入知识库名称",trigger:"blur"},{min:2,message:"请输入2~10个字符",trigger:"blur"}]}),C=()=>{var e;(e=n.value)==null||e.resetFields(),t.name=""},c=()=>{p("update:visible",!1),C()},V=()=>{c()},x=()=>{t.name=""},B=async()=>{try{d.value=!0,T({name:t.name}).then(e=>{const{code:o,msg:u}=e;o===200?(r.success("新建知识库成功！"),c(),p("refresh-list")):r.error(""+u)})}catch{r.error("操作失败，请重试")}finally{setTimeout(()=>{d.value=!1},500)}},_=()=>{n.value&&n.value.validate(e=>{e?B():r.error("请检查表单输入")})};R(()=>m.visible,e=>{e&&x()},{immediate:!0});const k=()=>{_()};return(e,o)=>{const u=l("el-input"),S=l("el-form-item"),D=l("el-form"),g=l("el-button"),F=l("el-dialog");return q(),j(F,{title:"新建知识库",modelValue:m.visible,"onUpdate:modelValue":o[1]||(o[1]=f=>m.visible=f),width:"660px","append-to-body":"","before-close":c},{footer:a(()=>[M("div",U,[s(g,{onClick:V},{default:a(()=>[h("取消")]),_:1}),s(g,{type:"primary",onClick:_,loading:d.value},{default:a(()=>[h(" 确定 ")]),_:1},8,["loading"])])]),default:a(()=>[s(D,{ref_key:"formRef",ref:n,model:t,rules:w,"label-width":"100px",onSubmit:K(k,["prevent"])},{default:a(()=>[s(S,{label:"知识库名称",prop:"name"},{default:a(()=>[s(u,{modelValue:t.name,"onUpdate:modelValue":o[0]||(o[0]=f=>t.name=f),placeholder:"请输入知识库名称","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}},z=I(A,[["__scopeId","data-v-20305415"]]);export{z as default};
