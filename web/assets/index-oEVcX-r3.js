import{B as W,a as X,d as Y,r as t,C as Z,J as ee,e as s,G as te,c as I,o as u,H as _,f as o,I as ae,l,h as n,m as le,K as oe,L as ne,j as g,n as d,D as y,t as se}from"./index-ChCbqBtc.js";import{d as ie}from"./template-D_2TWKT_.js";import{A as re,R as ue}from"./AddEdit-CpWOuNyw.js";import de from"./Upload-DC0dBMPs.js";import{c as pe}from"./tool-CCETPaDm.js";import me from"./AddKnowledgeBase-Dk5HdOri.js";import"./lodash-DN9DU0YO.js";import"./index-BD3tVcmV.js";const ce={class:"app-container"},fe=W({name:"Template"}),Re=Object.assign(fe,{setup(be){X();const{proxy:h}=Y(),{import_knowledge_base:K}=h.useDict("import_knowledge_base");t([]),t(!1);const x=t(!0),w=t(!0);t([]),t(!0),t(!0),t(0),t("");const U=t([]),V=Z({form:{},queryParams:{pageNum:1,pageSize:10,roleName:void 0,roleKey:void 0,status:void 0}}),{form:ve,rules:_e}=ee(V),z=t([{prop:"q",label:"问题",align:"left"},{prop:"a",label:"回答"},{prop:"status",label:"导入知识库状态",width:150},{prop:"createTime",label:"创建时间"},{prop:"",label:"操作",type:"operation",width:300}]),S=t([]);let k=t({});S.value=[{q:"问题1",a:"回答1",status:"未导入",createTime:"2025-06-19"},{q:"问题2",a:"回答2",status:"已导入",createTime:"2025-06-19"}];const r=t({total:0,pageNum:1,pageSize:10}),c=t({templateName:void 0,templateType:void 0});function f(){x.value=!0;let i={pageNum:r.value.pageNum,pageSize:r.value.pageSize};ue(i).then(a=>{a.rows.map(T=>{T.viewLoading=!1}),S.value=a.rows,r.value.total=a.total,x.value=!1})}f();let A=t([]);function b(){r.value.pageNum=1,f()}function L(){U.value=[],h.resetForm("queryRef"),b()}let D=t(!1),p=t(!1),R=t("add");function E(){p.value=!0,R.value="add"}function P(i){k.value=i,R.value="edit",p.value=!0}const $=i=>{h.$modal.confirm(`是否确认删除为${i.templateName}的数据项?`).then(function(){return ie(i.id)}).then(()=>{f(),h.$modal.msgSuccess("删除成功")}).catch(()=>{})};let v=t(!1),q=t("");function F(i){k.value=i,q.value="operation",v.value=!0}return(i,a)=>{const T=s("el-input"),N=s("el-form-item"),Q=s("el-option"),j=s("el-select"),m=s("el-button"),G=s("el-form"),H=s("el-col"),J=s("right-toolbar"),O=s("el-row"),M=s("Table"),C=te("hasPermi");return u(),I("div",ce,[_(o(G,{model:l(c),ref:"queryRef",inline:!0,"label-width":"115px"},{default:n(()=>[o(N,{label:"关键词",prop:"templateName"},{default:n(()=>[o(T,{modelValue:l(c).templateName,"onUpdate:modelValue":a[0]||(a[0]=e=>l(c).templateName=e),placeholder:"请输入关键词",clearable:"",style:{width:"240px"},onKeyup:le(b,["enter"])},null,8,["modelValue"])]),_:1}),o(N,{label:"导入知识库状态",prop:"status"},{default:n(()=>[o(j,{modelValue:l(c).status,"onUpdate:modelValue":a[1]||(a[1]=e=>l(c).status=e),placeholder:"请选择",clearable:"",style:{width:"240px"}},{default:n(()=>[(u(!0),I(oe,null,ne(l(K),e=>(u(),g(Q,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(N,null,{default:n(()=>[o(m,{type:"primary",icon:"Search",onClick:b},{default:n(()=>[d("搜索")]),_:1}),o(m,{icon:"Refresh",onClick:L},{default:n(()=>[d("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[ae,l(w)]]),o(O,{gutter:10,class:"mb8"},{default:n(()=>[o(H,{span:1.5},{default:n(()=>[_((u(),g(m,{type:"primary",plain:"",icon:"Plus",onClick:E},{default:n(()=>[d("新增")]),_:1})),[[C,["system:role:add"]]])]),_:1}),o(J,{showSearch:l(w),"onUpdate:showSearch":a[2]||(a[2]=e=>y(w)?w.value=e:null),onQueryTable:f},null,8,["showSearch"])]),_:1}),o(M,{paginationData:l(r),"onUpdate:paginationData":a[3]||(a[3]=e=>y(r)?r.value=e:null),tableColumn:l(z),tableData:l(S),showIndex:!0,onGetTableData:f},{fileSize:n(({row:e})=>[d(se(l(pe)(e.fileSize).formatted),1)]),operation:n(({row:e})=>[_((u(),g(m,{link:"",type:"primary",icon:"Edit",onClick:B=>P(e)},{default:n(()=>[d("修改 ")]),_:2},1032,["onClick"])),[[C,["system:sensitive:update"]]]),_((u(),g(m,{link:"",type:"danger",icon:"Delete",onClick:B=>$(e)},{default:n(()=>[d(" 删除 ")]),_:2},1032,["onClick"])),[[C,["system:sensitive:delete"]]]),_((u(),g(m,{link:"",type:"success",icon:"Right",onClick:B=>F(e)},{default:n(()=>[d("导入 ")]),_:2},1032,["onClick"])),[[C,["document:list:import"]]])]),_:1},8,["paginationData","tableColumn","tableData"]),o(de,{visible:l(D),"onUpdate:visible":a[4]||(a[4]=e=>y(D)?D.value=e:D=e),onRefreshList:b},null,8,["visible"]),o(re,{visible:l(p),"onUpdate:visible":a[5]||(a[5]=e=>y(p)?p.value=e:p=e),onRefreshList:b,tableDataItem:l(k),type:l(R)},null,8,["visible","tableDataItem","type"]),o(me,{visible:l(v),"onUpdate:visible":a[6]||(a[6]=e=>y(v)?v.value=e:v=e),tableSelectedCheckbox:l(A),tableDataItem:l(k),addKnowledgeBaseType:l(q),onRefreshList:a[7]||(a[7]=()=>{})},null,8,["visible","tableSelectedCheckbox","tableDataItem","addKnowledgeBaseType"])])}}});export{Re as default};
