import{_ as I,d as N,r as b,C as g,w as R,e as s,j,o as q,h as a,f as l,p as K,i as M,n as v,Z as r,am as T}from"./index-ChCbqBtc.js";import"./lodash-DN9DU0YO.js";const U={class:"dialog-footer"},A={__name:"CreateKnowledgeBase",props:{visible:{type:Boolean,default:!1},treeSelectedItem:{type:Object,default:()=>({})}},emits:["update:visible","refresh-list"],setup(h,{emit:w}){const{proxy:E}=N(),i=h,f=w,m=b(!1),n=b(null),t=g({name:""}),y=g({name:[{required:!0,message:"请输入知识库名称",trigger:"blur"},{min:2,message:"请输入2~10个字符",trigger:"blur"}]}),C=()=>{var e;(e=n.value)==null||e.resetFields(),t.name=""},c=()=>{f("update:visible",!1),C()},V=()=>{c()},x=()=>{t.name=""},B=async()=>{try{m.value=!0,T({name:t.name}).then(e=>{const{code:o,msg:d}=e;o===200?(r.success("新建知识库成功！"),c(),f("refresh-list")):r.error(""+d)})}catch{r.error("操作失败，请重试")}finally{setTimeout(()=>{m.value=!1},500)}},p=()=>{n.value&&n.value.validate(e=>{e?B():r.error("请检查表单输入")})};R(()=>i.visible,e=>{e&&x()},{immediate:!0});const k=()=>{p()};return(e,o)=>{const d=s("el-input"),D=s("el-form-item"),F=s("el-form"),_=s("el-button"),S=s("el-dialog");return q(),j(S,{title:"新建知识库",modelValue:i.visible,"onUpdate:modelValue":o[1]||(o[1]=u=>i.visible=u),width:"660px","append-to-body":"","before-close":c},{footer:a(()=>[M("div",U,[l(_,{onClick:V},{default:a(()=>[v("取消")]),_:1}),l(_,{type:"primary",onClick:p,loading:m.value},{default:a(()=>[v(" 确定 ")]),_:1},8,["loading"])])]),default:a(()=>[l(F,{ref_key:"formRef",ref:n,model:t,rules:y,"label-width":"100px",onSubmit:K(k,["prevent"])},{default:a(()=>[l(D,{label:"知识库名称",prop:"name"},{default:a(()=>[l(d,{modelValue:t.name,"onUpdate:modelValue":o[0]||(o[0]=u=>t.name=u),placeholder:"请输入知识库名称","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}},z=I(A,[["__scopeId","data-v-8ea9391c"]]);export{z as default};
