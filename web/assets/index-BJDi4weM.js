import{B as F,a as G,d as H,r as t,C as J,J as O,e as u,G as M,c as W,o as p,H as d,f as o,I as Y,l as n,h as a,m as Z,n as i,j as f,D as h,t as ee}from"./index-ChCbqBtc.js";import{R as te,d as ae}from"./template-D_2TWKT_.js";import le from"./Upload-CyOIQ03D.js";import oe from"./Edit-CcogW1OV.js";import{c as ne}from"./tool-CCETPaDm.js";import ie from"./AddKnowledgeBase-Dk5HdOri.js";import"./lodash-DN9DU0YO.js";import"./index-BD3tVcmV.js";const se={class:"app-container"},re=F({name:"Template"}),ke=Object.assign(re,{setup(ue){G();const{proxy:k}=H(),{import_knowledge_base:pe}=k.useDict("import_knowledge_base");t([]),t(!1);const x=t(!0),C=t(!0);t([]),t(!0),t(!0),t(0),t("");const I=t([]),K=J({form:{},queryParams:{pageNum:1,pageSize:10,roleName:void 0,roleKey:void 0,status:void 0}}),{form:de,rules:me}=O(K),P=t([{prop:"q",label:"编号",align:"left"},{prop:"a",label:"文件名称"},{prop:"status",label:"文件大小",width:150},{prop:"",label:"操作",type:"operation",width:300}]),N=t([]);let w=t({});N.value=[{q:"XXXX-2025-01",a:"XXXXX.docx"},{q:"XXXX-2025-02",a:"XXXXX.docx"}];const m=t({total:0,pageNum:1,pageSize:10}),_=t({templateName:void 0,templateType:void 0});function D(){x.value=!0;let s={pageNum:m.value.pageNum,pageSize:m.value.pageSize,templateName:_.value.templateName,templateType:_.value.templateType};te(s).then(l=>{l.rows.map(R=>{R.viewLoading=!1}),N.value=l.rows,m.value.total=l.total,x.value=!1})}let z=t([]);function b(){m.value.pageNum=1,D()}function U(){I.value=[],k.resetForm("queryRef"),b()}function S(){v.value=!0}let v=t(!1),y=t(!1);function E(s){w.value=s,y.value=!0}const L=s=>{k.$modal.confirm(`是否确认删除为${s.templateName}的数据项?`).then(function(){return ae(s.id)}).then(()=>{D(),k.$modal.msgSuccess("删除成功")}).catch(()=>{})};let g=t(!1),T=t("");function V(s){w.value=s,T.value="operation",g.value=!0}return(s,l)=>{const R=u("el-input"),q=u("el-form-item"),r=u("el-button"),$=u("el-form"),X=u("el-col"),A=u("right-toolbar"),Q=u("el-row"),j=u("Table"),c=M("hasPermi");return p(),W("div",se,[d(o($,{model:n(_),ref:"queryRef",inline:!0,"label-width":"115px"},{default:a(()=>[o(q,{label:"文件名称",prop:"templateName"},{default:a(()=>[o(R,{modelValue:n(_).templateName,"onUpdate:modelValue":l[0]||(l[0]=e=>n(_).templateName=e),placeholder:"请输入文件名称",clearable:"",style:{width:"240px"},onKeyup:Z(b,["enter"])},null,8,["modelValue"])]),_:1}),o(q,null,{default:a(()=>[o(r,{type:"primary",icon:"Search",onClick:b},{default:a(()=>[i("搜索")]),_:1}),o(r,{icon:"Refresh",onClick:U},{default:a(()=>[i("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[Y,n(C)]]),o(Q,{gutter:10,class:"mb8"},{default:a(()=>[o(X,{span:1.5},{default:a(()=>[d((p(),f(r,{type:"primary",plain:"",icon:"Plus",onClick:S},{default:a(()=>[i(" 批量上传 ")]),_:1})),[[c,["system:role:add"]]])]),_:1}),o(X,{span:1.5},{default:a(()=>[d((p(),f(r,{type:"primary",plain:"",icon:"Plus",onClick:S},{default:a(()=>[i(" 批量修改 ")]),_:1})),[[c,["system:role:add"]]])]),_:1}),o(X,{span:1.5},{default:a(()=>[d((p(),f(r,{type:"primary",plain:"",icon:"Plus",onClick:S},{default:a(()=>[i(" 调整编号 ")]),_:1})),[[c,["system:role:add"]]])]),_:1}),o(X,{span:1.5},{default:a(()=>[d((p(),f(r,{type:"primary",plain:"",icon:"Plus",onClick:S},{default:a(()=>[i(" 生成发放计划 ")]),_:1})),[[c,["system:role:add"]]])]),_:1}),o(A,{showSearch:n(C),"onUpdate:showSearch":l[1]||(l[1]=e=>h(C)?C.value=e:null),onQueryTable:D},null,8,["showSearch"])]),_:1}),o(j,{paginationData:n(m),"onUpdate:paginationData":l[2]||(l[2]=e=>h(m)?m.value=e:null),tableColumn:n(P),tableData:n(N),showIndex:!0,onGetTableData:D},{fileSize:a(({row:e})=>[i(ee(n(ne)(e.fileSize).formatted),1)]),operation:a(({row:e})=>[d((p(),f(r,{link:"",type:"primary",icon:"Edit",onClick:B=>E(e)},{default:a(()=>[i("修改 ")]),_:2},1032,["onClick"])),[[c,["system:sensitive:update"]]]),d((p(),f(r,{link:"",type:"danger",icon:"Delete",onClick:B=>L(e)},{default:a(()=>[i(" 删除 ")]),_:2},1032,["onClick"])),[[c,["system:sensitive:delete"]]]),d((p(),f(r,{link:"",type:"success",icon:"Right",onClick:B=>V(e)},{default:a(()=>[i("导入 ")]),_:2},1032,["onClick"])),[[c,["document:list:import"]]])]),_:1},8,["paginationData","tableColumn","tableData"]),o(le,{visible:n(v),"onUpdate:visible":l[3]||(l[3]=e=>h(v)?v.value=e:v=e),onRefreshList:b},null,8,["visible"]),o(oe,{visible:n(y),"onUpdate:visible":l[4]||(l[4]=e=>h(y)?y.value=e:y=e),onRefreshList:b,tableDataItem:n(w)},null,8,["visible","tableDataItem"]),o(ie,{visible:n(g),"onUpdate:visible":l[5]||(l[5]=e=>h(g)?g.value=e:g=e),tableSelectedCheckbox:n(z),tableDataItem:n(w),addKnowledgeBaseType:n(T),onRefreshList:l[6]||(l[6]=()=>{})},null,8,["visible","tableSelectedCheckbox","tableDataItem","addKnowledgeBaseType"])])}}});export{ke as default};
