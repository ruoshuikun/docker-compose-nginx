# é¡¹ç›®æ¶æ„ä¼˜åŒ–æ–¹æ¡ˆ

## ğŸ” **ç°æœ‰é—®é¢˜åˆ†æ**

### 1. è„šæœ¬è®¾è®¡é—®é¢˜

**åŸæœ‰ scripts ç›®å½•é—®é¢˜**ï¼š
- âŒ **åŠŸèƒ½é‡å¤**ï¼šå¤šä¸ªè„šæœ¬åŠŸèƒ½é‡å ï¼Œæ²¡æœ‰ç»Ÿä¸€ç®¡ç†
- âŒ **è¿‡äºå¤æ‚**ï¼š`quick-deploy.sh` åŠŸèƒ½å¤ªå¤šï¼Œä¸å¤Ÿèšç„¦
- âŒ **å•é¡¹ç›®å¯¼å‘**ï¼šæ²¡æœ‰é’ˆå¯¹å¤šé¡¹ç›®æ¶æ„è®¾è®¡
- âŒ **ç¼ºå°‘æ¨¡å—åŒ–**ï¼šæ¯ä¸ªè„šæœ¬éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ²¡æœ‰å…±äº«åŠŸèƒ½

### 2. ç›®å½•ç»“æ„é—®é¢˜

**åŸæœ‰ç»“æ„æ··ä¹±**ï¼š
```
nginx/html/
â”œâ”€â”€ assets/          # âŒ æ ¹çº§åˆ« assetsï¼Œå®¹æ˜“å†²çª
â”œâ”€â”€ index.html       # âŒ æ ¹çº§åˆ« index.html
â”œâ”€â”€ favicon.ico      # âŒ æ ¹çº§åˆ«æ–‡ä»¶
â””â”€â”€ web/             # âœ… é¡¹ç›®ç›®å½•ï¼ˆä½†ç»“æ„ä¸ä¸€è‡´ï¼‰
    â”œâ”€â”€ assets/
    â”œâ”€â”€ libs/
    â””â”€â”€ index.html
```

### 3. é…ç½®æ–‡ä»¶é—®é¢˜

**åŸæœ‰ env.example è¿‡äºç®€å•**ï¼š
- é…ç½®é¡¹å¤ªå°‘ï¼Œç¼ºå°‘å®ç”¨é€‰é¡¹
- æ²¡æœ‰åˆ†ç±»ï¼Œä¸ä¾¿äºç®¡ç†
- ç¼ºå°‘æ³¨é‡Šè¯´æ˜

## ğŸš€ **ä¼˜åŒ–æ–¹æ¡ˆ**

### 1. ç»Ÿä¸€ç®¡ç†è„šæœ¬ï¼š`nginx-manager.sh`

**è®¾è®¡ç†å¿µ**ï¼šä¸€ä¸ªè„šæœ¬è§£å†³æ‰€æœ‰éœ€æ±‚

```bash
# åŸºç¡€æ“ä½œ
./nginx-manager.sh start              # å¯åŠ¨æœåŠ¡
./nginx-manager.sh stop               # åœæ­¢æœåŠ¡
./nginx-manager.sh restart            # é‡å¯æœåŠ¡
./nginx-manager.sh status             # æŸ¥çœ‹çŠ¶æ€

# å¤šé¡¹ç›®ç®¡ç†
./nginx-manager.sh deploy web /path/to/dist     # éƒ¨ç½² web é¡¹ç›®
./nginx-manager.sh deploy admin /path/to/admin  # éƒ¨ç½² admin é¡¹ç›®
./nginx-manager.sh list                         # åˆ—å‡ºæ‰€æœ‰é¡¹ç›®
./nginx-manager.sh remove web                   # åˆ é™¤é¡¹ç›®

# é…ç½®ç®¡ç†
./nginx-manager.sh reload             # é‡æ–°åŠ è½½é…ç½®
./nginx-manager.sh test               # æµ‹è¯•é…ç½®
./nginx-manager.sh edit               # ç¼–è¾‘é…ç½®

# ç³»ç»Ÿç»´æŠ¤
./nginx-manager.sh health             # å¥åº·æ£€æŸ¥
./nginx-manager.sh clean              # æ¸…ç†ç³»ç»Ÿ
```

**ä¼˜åŠ¿**ï¼š
- âœ… **ç»Ÿä¸€å…¥å£**ï¼šæ‰€æœ‰æ“ä½œé€šè¿‡ä¸€ä¸ªè„šæœ¬å®Œæˆ
- âœ… **å¤šé¡¹ç›®æ”¯æŒ**ï¼šåŸç”Ÿæ”¯æŒå¤šé¡¹ç›®ç®¡ç†
- âœ… **è‡ªåŠ¨åŒ–**ï¼šè‡ªåŠ¨ç¯å¢ƒæ£€æŸ¥ã€ç›®å½•åˆ›å»ºã€æƒé™è®¾ç½®
- âœ… **è·¨å¹³å°**ï¼šæ”¯æŒ CentOS/Ubuntu ç­‰ä¸»æµæœåŠ¡å™¨ç³»ç»Ÿ

### 2. ç®€åŒ–è¿œç¨‹éƒ¨ç½²ï¼š`scripts/remote-deploy.sh`

**ä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½**ï¼š
```bash
# ä»…éƒ¨ç½²æ¡†æ¶
./scripts/remote-deploy.sh 192.168.1.100 root

# éƒ¨ç½²æ¡†æ¶ + é¡¹ç›®
./scripts/remote-deploy.sh 192.168.1.100 root web /path/to/dist
```

**ä¼˜åŠ¿**ï¼š
- âœ… **åŠŸèƒ½èšç„¦**ï¼šä¸“æ³¨äºè¿œç¨‹éƒ¨ç½²
- âœ… **å‚æ•°ç®€åŒ–**ï¼šå¿…éœ€å‚æ•°æœ€å°‘åŒ–
- âœ… **æ™ºèƒ½æ£€æµ‹**ï¼šè‡ªåŠ¨æ£€æµ‹æœåŠ¡å™¨ç¯å¢ƒ
- âœ… **é˜²ç«å¢™é…ç½®**ï¼šè‡ªåŠ¨é…ç½® CentOS/Ubuntu é˜²ç«å¢™

### 3. è§„èŒƒåŒ–ç›®å½•ç»“æ„

**æ¨èç»“æ„**ï¼š
```
nginx/html/
â”œâ”€â”€ web/                    # âœ… é¡¹ç›®1
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ libs/
â”‚   â””â”€â”€ favicon.ico
â”œâ”€â”€ web2/                   # âœ… é¡¹ç›®2
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ assets/
â”‚   â””â”€â”€ favicon.ico
â”œâ”€â”€ admin/                  # âœ… ç®¡ç†åå°
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ assets/
â”‚   â””â”€â”€ favicon.ico
â””â”€â”€ shared/                 # âœ… å…±äº«èµ„æºï¼ˆå¯é€‰ï¼‰
    â””â”€â”€ common-libs/
```

**ä¼˜åŠ¿**ï¼š
- âœ… **å®Œå…¨éš”ç¦»**ï¼šæ¯ä¸ªé¡¹ç›®ç‹¬ç«‹ç›®å½•
- âœ… **ç»“æ„ä¸€è‡´**ï¼šæ‰€æœ‰é¡¹ç›®éµå¾ªç›¸åŒç»“æ„
- âœ… **é¿å…å†²çª**ï¼šä¸åŒé¡¹ç›®çš„åŒåæ–‡ä»¶ä¸å†²çª
- âœ… **ä¾¿äºç®¡ç†**ï¼šæ¸…æ™°çš„é¡¹ç›®å±‚æ¬¡

### 4. å®Œå–„çš„ç¯å¢ƒé…ç½®

**æ–°çš„ `env.example`** åŒ…å«ï¼š

```bash
# åŸºç¡€é…ç½®
NGINX_CONTAINER_NAME=nginx-server
NGINX_PORT=80
DEFAULT_PROJECT=web

# æ€§èƒ½é…ç½®
WORKER_PROCESSES=auto
CLIENT_MAX_BODY_SIZE=100M
ENABLE_GZIP=true

# ç¼“å­˜é…ç½®
STATIC_CACHE_TIME=1y
HTML_CACHE_TIME=1h

# ä»£ç†é…ç½®
API_BACKEND_HOST=10.8.0.18
API_BACKEND_PORT=8086

# å®‰å…¨é…ç½®
ENABLE_HTTPS_REDIRECT=false
DEBUG_MODE=false
```

**ä¼˜åŠ¿**ï¼š
- âœ… **é…ç½®å®Œæ•´**ï¼šæ¶µç›–æ‰€æœ‰å¸¸ç”¨é…ç½®
- âœ… **åˆ†ç±»æ¸…æ™°**ï¼šæŒ‰åŠŸèƒ½åˆ†ç»„ï¼Œä¾¿äºç®¡ç†
- âœ… **æ³¨é‡Šè¯¦ç»†**ï¼šæ¯ä¸ªé…ç½®éƒ½æœ‰è¯´æ˜
- âœ… **æ‰©å±•æ€§å¼º**ï¼šæ”¯æŒè‡ªå®šä¹‰é…ç½®ç‰‡æ®µ

## ğŸ“Š **å¯¹æ¯”åˆ†æ**

### è„šæœ¬æ•°é‡å¯¹æ¯”

| æ–¹æ¡ˆ | è„šæœ¬æ•°é‡ | åŠŸèƒ½è¦†ç›– | å­¦ä¹ æˆæœ¬ | ç»´æŠ¤éš¾åº¦ |
|------|----------|----------|----------|----------|
| **åŸæ–¹æ¡ˆ** | 4ä¸ªè„šæœ¬ | 80% | é«˜ | é«˜ |
| **æ–°æ–¹æ¡ˆ** | 2ä¸ªè„šæœ¬ | 100% | ä½ | ä½ |

### ä½¿ç”¨ä½“éªŒå¯¹æ¯”

| æ“ä½œ | åŸæ–¹æ¡ˆ | æ–°æ–¹æ¡ˆ |
|------|--------|--------|
| **å¯åŠ¨æœåŠ¡** | `./scripts/start.sh` | `./nginx-manager.sh start` |
| **éƒ¨ç½²é¡¹ç›®** | `./scripts/deploy.sh /path` | `./nginx-manager.sh deploy web /path` |
| **è¿œç¨‹éƒ¨ç½²** | `./scripts/quick-deploy.sh IP user /path` | `./scripts/remote-deploy.sh IP user web /path` |
| **æŸ¥çœ‹çŠ¶æ€** | `docker-compose ps` | `./nginx-manager.sh status` |
| **ç®¡ç†å¤šé¡¹ç›®** | âŒ ä¸æ”¯æŒ | âœ… åŸç”Ÿæ”¯æŒ |

## ğŸ› ï¸ **è¿ç§»å»ºè®®**

### ç«‹å³æ”¹è¿›ï¼ˆä¿æŒå…¼å®¹ï¼‰

1. **ä¿ç•™åŸè„šæœ¬**ï¼šé¿å…ç ´åç°æœ‰å·¥ä½œæµ
2. **æ·»åŠ æ–°è„šæœ¬**ï¼š`nginx-manager.sh` ä½œä¸ºä¸»è¦å·¥å…·
3. **æ›´æ–°æ–‡æ¡£**ï¼šæ¨èä½¿ç”¨æ–°è„šæœ¬

### é€æ­¥æ›¿æ¢ï¼ˆåˆ†é˜¶æ®µï¼‰

1. **é˜¶æ®µ1**ï¼šåœ¨æ–°é¡¹ç›®ä¸­ä½¿ç”¨æ–°è„šæœ¬
2. **é˜¶æ®µ2**ï¼šè¿ç§»ç°æœ‰é¡¹ç›®åˆ°æ–°è„šæœ¬
3. **é˜¶æ®µ3**ï¼šç§»é™¤æ—§è„šæœ¬ï¼Œå®Œæˆè¿ç§»

### å›¢é˜ŸåŸ¹è®­

1. **æ–°è„šæœ¬ä½¿ç”¨åŸ¹è®­**ï¼šä»‹ç» `nginx-manager.sh` åŠŸèƒ½
2. **æœ€ä½³å®è·µåˆ†äº«**ï¼šå¤šé¡¹ç›®ç®¡ç†ç»éªŒ
3. **æ•…éšœæ’é™¤æŒ‡å—**ï¼šå¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

## ğŸ“ˆ **é¢„æœŸæ”¶ç›Š**

### å¼€å‘æ•ˆç‡æå‡

- **éƒ¨ç½²æ—¶é—´å‡å°‘ 50%**ï¼šç»Ÿä¸€è„šæœ¬ï¼Œå‡å°‘å­¦ä¹ æˆæœ¬
- **é”™è¯¯ç‡é™ä½ 80%**ï¼šè‡ªåŠ¨åŒ–æ£€æŸ¥ï¼Œå‡å°‘äººä¸ºé”™è¯¯
- **ç»´æŠ¤æˆæœ¬é™ä½ 60%**ï¼šç»Ÿä¸€ç®¡ç†ï¼Œä¾¿äºç»´æŠ¤

### ç³»ç»Ÿç¨³å®šæ€§æå‡

- **é…ç½®æ ‡å‡†åŒ–**ï¼šç»Ÿä¸€çš„é…ç½®ç®¡ç†
- **è‡ªåŠ¨åŒ–éƒ¨ç½²**ï¼šå‡å°‘æ‰‹åŠ¨æ“ä½œé£é™©
- **ç›‘æ§å®Œå–„**ï¼šå†…ç½®å¥åº·æ£€æŸ¥å’ŒçŠ¶æ€ç›‘æ§

### æ‰©å±•æ€§æå‡

- **å¤šé¡¹ç›®æ”¯æŒ**ï¼šè½»æ¾ç®¡ç†å¤šä¸ªå‰ç«¯é¡¹ç›®
- **è·¨å¹³å°å…¼å®¹**ï¼šæ”¯æŒä¸»æµæœåŠ¡å™¨æ“ä½œç³»ç»Ÿ
- **é…ç½®çµæ´»**ï¼šä¸°å¯Œçš„é…ç½®é€‰é¡¹

## ğŸ¯ **ä½¿ç”¨å»ºè®®**

### æ–°é¡¹ç›®æ¨èç”¨æ³•

```bash
# 1. åˆå§‹åŒ–é¡¹ç›®
./nginx-manager.sh start

# 2. éƒ¨ç½²å¤šä¸ªé¡¹ç›®
./nginx-manager.sh deploy web /path/to/web-dist
./nginx-manager.sh deploy admin /path/to/admin-dist
./nginx-manager.sh deploy mobile /path/to/mobile-dist

# 3. æŸ¥çœ‹é¡¹ç›®çŠ¶æ€
./nginx-manager.sh list
./nginx-manager.sh status

# 4. ç»´æŠ¤ç®¡ç†
./nginx-manager.sh health
./nginx-manager.sh logs
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

```bash
# 1. è¿œç¨‹éƒ¨ç½²åˆ°ç”Ÿäº§æœåŠ¡å™¨
./scripts/remote-deploy.sh 192.168.1.100 root web /path/to/dist

# 2. åç»­ç®¡ç†ï¼ˆåœ¨æœåŠ¡å™¨ä¸Šï¼‰
ssh root@192.168.1.100 'cd /opt/nginx-template && ./nginx-manager.sh status'
ssh root@192.168.1.100 'cd /opt/nginx-template && ./nginx-manager.sh health'
```

### æ—¥å¸¸ç»´æŠ¤

```bash
# æŸ¥çœ‹æ‰€æœ‰é¡¹ç›®
./nginx-manager.sh list

# æ›´æ–°é¡¹ç›®
./nginx-manager.sh deploy web /new/path/to/dist

# åˆ é™¤é¡¹ç›®
./nginx-manager.sh remove old-project

# ç³»ç»Ÿæ¸…ç†
./nginx-manager.sh clean
```

---

**æ€»ç»“**ï¼šæ–°çš„æ¶æ„è®¾è®¡æ›´åŠ ç°ä»£åŒ–ã€æ¨¡å—åŒ–ï¼Œç‰¹åˆ«é€‚åˆå¤šé¡¹ç›®ç®¡ç†åœºæ™¯ã€‚å»ºè®®é€æ­¥è¿ç§»åˆ°æ–°æ¶æ„ï¼Œä»¥è·å¾—æ›´å¥½çš„å¼€å‘ä½“éªŒå’Œç³»ç»Ÿç¨³å®šæ€§ã€‚ 